<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>poker</title>
  <link rel="stylesheet" href="./poker.css" />
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js" defer></script>
</head>
<body>
  <main class="wrap">
    <header class="top">
      <div>
        <div class="title">poker</div>
        <div class="sub">poker is awesome</div>
      </div>
      <div class="me" id="me"></div>
    </header>

    <section class="card" id="loginCard">
      <h2>sign in</h2>
      <p class="muted">username only (a-z, 0-9, underscore). chips persist on the server.</p>
      <div class="row">
        <input id="username" placeholder="username" autocomplete="off" />
        <button id="loginBtn">enter</button>
      </div>
      <div class="err" id="loginErr"></div>
    </section>

    <section class="grid">
      <section class="card" id="lobbyCard" hidden>
        <h2>room</h2>
        <div class="row">
          <input id="roomId" placeholder="room id (e.g. fridaynight)" autocomplete="off" />
          <button id="joinRoomBtn">join</button>
        </div>
        <div class="muted">share the room id with friends. everyone joins the same room.</div>

        <hr style="border:0;border-top:1px solid var(--border);margin:14px 0" />

        <h2>top up</h2>
        <div class="row">
          <input id="topupAmount" placeholder="amount (e.g. 500)" inputmode="numeric" />
          <button id="topupBtn">add chips</button>
        </div>
        <div class="err" id="topupErr"></div>

        <hr style="border:0;border-top:1px solid var(--border);margin:14px 0" />

        <p class="muted">Back to hub: <a href="../">mootvey.dev</a></p>
      </section>

      <section class="card" id="tableCard" hidden>
        <div class="tableTop">
          <h2>table</h2>
          <div class="row">
            <button id="startHandBtn">start hand</button>
            <button id="startSessionBtn">start session</button>
            <button id="endSessionBtn">end session / settle</button>
            <button id="resetSessionBtn" title="Clears the room's session baseline / settlement ledger (host only)">reset settlement</button>
            <span class="muted" id="hostNote"></span>
          </div>
        </div>

        <div class="tableVisual" id="tableVisual">
          <div class="felt">
            <div class="board" id="board"></div>
            <div class="pot" id="pot"></div>
          </div>
          <div class="ring" id="seatRing"></div>
        </div>

        <div class="actions" id="actions"></div>
        <div class="err" id="tableErr"></div>
      </section>

      <section class="card modal" id="settleModal" hidden>
        <div class="tableTop">
          <h2>settlement</h2>
          <div class="row">
            <button id="printSettleBtn">print</button>
            <button id="downloadPdfBtn">save pdf</button>
            <button id="closeSettleBtn">close</button>
          </div>
        </div>
        <div id="settleBody"></div>
      </section>
    </section>
  </main>

  <script type="module" src="./poker.js"></script>
</body>
</html>
